import{_ as w,u as M,x as b,b as A,w as v,d as p,k as C,l as o,P as s,v as m,K as x,A as S,c as i,a,s as f,y as T,t as _,F as K,r as P,e as V,g as k,o as u,h as l,m as I}from"./index.33fbabbb.js";const B={setup(){const r=M(),c=b();async function g(){try{const e=r.params.vaultId;await m.setActiveVault(e)}catch(e){e.response.data=="This vault is private!"?(o.error(e),s.toast("That vault is private","error","top"),c.push({name:"Home"})):(o.log(e),s.error(e.message))}}async function t(){try{const e=r.params.vaultId;await I.getKeepsInVault(e)}catch(e){e.response.data=="This vault is private!"?(o.error(e),s.toast("That vault is private","error","top"),c.push({name:"Home"})):(o.log(e),s.error(e.message))}}async function h(){try{await I.getMyVaultKeeps()}catch(e){o.error(e),s.error(e.message)}}async function y(){try{const e=l.account.id;await m.GetMyVaults(e)}catch(e){o.error(e),s.error(e.message)}}return A(()=>{g()}),v(()=>{l.account.id&&(y(),h())}),v(()=>{l.activeVault&&t()}),v(()=>{r.params.vaultId}),{vault:p(()=>l.activeVault),vaultKeeps:p(()=>l.keepsInVault),account:p(()=>l.account),route:r,async setActiveKeep(e){try{await C.setActiveKeep(e)}catch(n){o.log(n),s.error(n.message)}},async deleteVault(){try{if(await s.confirm("Are you sure you'd like to delete this vault?","This action cannot be undone","Yes, I'm sure","warning")){const e=r.params.vaultId;await m.deleteVault(e),c.push({name:"Account"})}}catch(e){o.log(e),s.error(e.message)}}}},components:{KeepsCard:x,ActiveKeepModal:S}},N={class:"container-fluid"},j={key:0,class:"row justify-content-center"},D={class:"col-md-5 mt-md-4 px-0"},E={class:"fs-4"},F={class:"d-flex justify-content-center"},G={class:"keeps-count fs-5"},H={class:"col-md-10 mb-3"},R={class:"row"},z={class:"masonry-with-columns"},L=["onClick"];function Y(r,c,g,t,h,y){const e=k("KeepsCard"),n=k("ActiveKeepModal");return u(),i(K,null,[a("div",N,[t.vault?(u(),i("section",j,[a("div",D,[t.vault.creatorId==t.account.id?(u(),i("button",{key:0,class:"btn btn-outline-danger delete-btn",onClick:c[0]||(c[0]=d=>t.deleteVault())},"Delete Vault")):f("",!0),a("div",{class:"vault-banner",style:T({backgroundImage:`url(${t.vault.img})`})},[a("h1",null,_(t.vault.name),1),a("h2",E,"by "+_(t.vault.creator.name),1)],4),a("div",F,[a("h3",G,_(t.vaultKeeps.length)+" Keeps",1)])]),a("div",H,[a("section",R,[a("div",z,[(u(!0),i(K,null,P(t.vaultKeeps,d=>(u(),i("div",{key:d.id,class:"keeps-card elevation-4",onClick:q=>t.setActiveKeep(d.id),"data-bs-toggle":"modal","data-bs-target":"#activeKeepModal"},[V(e,{keep:d},null,8,["keep"])],8,L))),128))])])])])):f("",!0)]),V(n,{vault:t.vault},null,8,["vault"])],64)}const O=w(B,[["render",Y],["__scopeId","data-v-7de42c0d"]]);export{O as default};
